<!doctype html>
<html>
<title>Flaskr</title>
<link rel=stylesheet type=text/css href="style.css">
    
<!-- Vendors -->
<script src="js/jquery.js"></script>
<script src="js/mustache.js"></script>
<script src="js/sammy.js"></script>
<script src="js/class.js"></script>
    
<!-- My libs -->
<script src="js/mine.js"></script>
<script src="js/pclass.js"></script>

<!-- Views -->
<script src="views/entry.js"></script>

<!-- Routes -->
<script type="text/javascript" charset="utf-8">

    var app = $.sammy(function() {

        this.get('#/', function() {            
            EntryViews.render("index");
        });

        this.post('#/', function() {
            EntryViews.render("post", {data: this.params});
            this.redirect('#/');
        });

        this.get('#/:id', function() {
            EntryViews.render("get", {id: this.params['id']});
        });

        this.get('#/:id/edit', function() { 
            EntryViews.render("get_edit_form", {id: this.params['id']});
        });

        this.put('#/:id/edit', function() { 
            EntryViews.render("put", {id: this.params['id'], data: this.params});
            this.redirect('#/');            
        });

        this.get('#/:id/delete', function() {
            EntryViews.render("delete", {id: this.params['id']});
            this.redirect('#/');
        });

    });

    $(function() {
        app.run()
    });

</script>

<!-- Testes -->
<script>
    
    
    // First example: hello big world
    HelloBigWorld = PrototypeClass.extend({
        
        prototype : {
            
            // object initializer
            initialize: {
                value : function(){ console.log("Hello "); }
            },
            
            // object property
            big: {
                value: "Big"
            }
            
        },
        
        // class method
        world: {
            value: function(){
                console.log("World");
            }
        }
        
    });
    
    hbw = HelloBigWorld.create();
    console.log(hbw.big);
    HelloBigWorld.world();
    
    // Second example: Inheritance/polymorphism
    var Father = PrototypeClass.extend({
        
        prototype: {
            
            initialize:{
                value: function (msg){
                    console.log("Init Father object. MSG: " + msg);
                }
            },
            
            id: {value : 100},
            
            hello: {
                value: function() {
                    console.log('Hello I am from object method of Father. My ID is ' + this.id); 
                }
            },
            
        },
        
        hello: {
            value: function() {
                console.log('Hello I am from class method of Father.'); 
            }
        },
    
    });
    
    var Filho = Father.extend({

        prototype: {
            
            id: {value : 333},
            
            hello: {
                value : function() { 
                    console.log('hello I am from object method of class Filho'); 
                    
                    // accessing super member
                    Father.invoke_class_member("hello");
                    Father.invoke_member(this, "hello");
                    Filho.super(this, "hello");
                    Filho.super_class_member("hello");                    
                }
            },
            
            adress: {
                value: null,
                enumerable: true,
                configurable: true,
                writable: true
            }
            
        },
        
        hello:{
            value: function(){
                console.log("class method filho");
            }
        }     
    
    });
    
    Father.hello();    
    var father = Father.create("Aka");
    father.hello();
        
    Filho.hello();
    var filho = Filho.create("Junior");
    filho.hello();    
    
    console.log(Filho.isPrototypeOf(filho)); // true
    console.log(filho.instanceof(Filho)); // true
    console.log(Father.isPrototypeOf(filho)); // true
    console.log(filho.instanceof(Father)); // true
    console.log(father.instanceof(HelloBigWorld)); // false

</script>

<body>
    
    <div class=page>
        
        <h1>Flaskr</h1>

        <div id="content">
        </div>
    </div>




</body>
</html>